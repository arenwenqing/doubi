/******/ (function() { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ 6700:
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

var map = {
	"./af": 2786,
	"./af.js": 2786,
	"./ar": 867,
	"./ar-dz": 4130,
	"./ar-dz.js": 4130,
	"./ar-kw": 6135,
	"./ar-kw.js": 6135,
	"./ar-ly": 6440,
	"./ar-ly.js": 6440,
	"./ar-ma": 7702,
	"./ar-ma.js": 7702,
	"./ar-sa": 6040,
	"./ar-sa.js": 6040,
	"./ar-tn": 7100,
	"./ar-tn.js": 7100,
	"./ar.js": 867,
	"./az": 1083,
	"./az.js": 1083,
	"./be": 9808,
	"./be.js": 9808,
	"./bg": 8338,
	"./bg.js": 8338,
	"./bm": 7438,
	"./bm.js": 7438,
	"./bn": 8905,
	"./bn-bd": 6225,
	"./bn-bd.js": 6225,
	"./bn.js": 8905,
	"./bo": 1560,
	"./bo.js": 1560,
	"./br": 1278,
	"./br.js": 1278,
	"./bs": 622,
	"./bs.js": 622,
	"./ca": 2468,
	"./ca.js": 2468,
	"./cs": 5822,
	"./cs.js": 5822,
	"./cv": 877,
	"./cv.js": 877,
	"./cy": 7373,
	"./cy.js": 7373,
	"./da": 4780,
	"./da.js": 4780,
	"./de": 9740,
	"./de-at": 217,
	"./de-at.js": 217,
	"./de-ch": 894,
	"./de-ch.js": 894,
	"./de.js": 9740,
	"./dv": 5300,
	"./dv.js": 5300,
	"./el": 837,
	"./el.js": 837,
	"./en-au": 8348,
	"./en-au.js": 8348,
	"./en-ca": 7925,
	"./en-ca.js": 7925,
	"./en-gb": 2243,
	"./en-gb.js": 2243,
	"./en-ie": 6436,
	"./en-ie.js": 6436,
	"./en-il": 7207,
	"./en-il.js": 7207,
	"./en-in": 4175,
	"./en-in.js": 4175,
	"./en-nz": 6319,
	"./en-nz.js": 6319,
	"./en-sg": 1662,
	"./en-sg.js": 1662,
	"./eo": 2915,
	"./eo.js": 2915,
	"./es": 5655,
	"./es-do": 5251,
	"./es-do.js": 5251,
	"./es-mx": 6112,
	"./es-mx.js": 6112,
	"./es-us": 1146,
	"./es-us.js": 1146,
	"./es.js": 5655,
	"./et": 5603,
	"./et.js": 5603,
	"./eu": 7763,
	"./eu.js": 7763,
	"./fa": 6959,
	"./fa.js": 6959,
	"./fi": 1897,
	"./fi.js": 1897,
	"./fil": 2549,
	"./fil.js": 2549,
	"./fo": 4694,
	"./fo.js": 4694,
	"./fr": 4470,
	"./fr-ca": 3049,
	"./fr-ca.js": 3049,
	"./fr-ch": 2330,
	"./fr-ch.js": 2330,
	"./fr.js": 4470,
	"./fy": 5044,
	"./fy.js": 5044,
	"./ga": 9295,
	"./ga.js": 9295,
	"./gd": 2101,
	"./gd.js": 2101,
	"./gl": 8794,
	"./gl.js": 8794,
	"./gom-deva": 7884,
	"./gom-deva.js": 7884,
	"./gom-latn": 3168,
	"./gom-latn.js": 3168,
	"./gu": 5349,
	"./gu.js": 5349,
	"./he": 4206,
	"./he.js": 4206,
	"./hi": 94,
	"./hi.js": 94,
	"./hr": 316,
	"./hr.js": 316,
	"./hu": 2138,
	"./hu.js": 2138,
	"./hy-am": 1423,
	"./hy-am.js": 1423,
	"./id": 9218,
	"./id.js": 9218,
	"./is": 135,
	"./is.js": 135,
	"./it": 626,
	"./it-ch": 150,
	"./it-ch.js": 150,
	"./it.js": 626,
	"./ja": 9183,
	"./ja.js": 9183,
	"./jv": 4286,
	"./jv.js": 4286,
	"./ka": 2105,
	"./ka.js": 2105,
	"./kk": 7772,
	"./kk.js": 7772,
	"./km": 8758,
	"./km.js": 8758,
	"./kn": 9282,
	"./kn.js": 9282,
	"./ko": 3730,
	"./ko.js": 3730,
	"./ku": 1408,
	"./ku.js": 1408,
	"./ky": 3291,
	"./ky.js": 3291,
	"./lb": 6841,
	"./lb.js": 6841,
	"./lo": 5466,
	"./lo.js": 5466,
	"./lt": 7010,
	"./lt.js": 7010,
	"./lv": 7595,
	"./lv.js": 7595,
	"./me": 9861,
	"./me.js": 9861,
	"./mi": 5493,
	"./mi.js": 5493,
	"./mk": 5966,
	"./mk.js": 5966,
	"./ml": 7341,
	"./ml.js": 7341,
	"./mn": 5115,
	"./mn.js": 5115,
	"./mr": 370,
	"./mr.js": 370,
	"./ms": 9847,
	"./ms-my": 1237,
	"./ms-my.js": 1237,
	"./ms.js": 9847,
	"./mt": 2126,
	"./mt.js": 2126,
	"./my": 6165,
	"./my.js": 6165,
	"./nb": 4924,
	"./nb.js": 4924,
	"./ne": 6744,
	"./ne.js": 6744,
	"./nl": 3901,
	"./nl-be": 9814,
	"./nl-be.js": 9814,
	"./nl.js": 3901,
	"./nn": 3877,
	"./nn.js": 3877,
	"./oc-lnc": 2135,
	"./oc-lnc.js": 2135,
	"./pa-in": 5858,
	"./pa-in.js": 5858,
	"./pl": 4495,
	"./pl.js": 4495,
	"./pt": 9520,
	"./pt-br": 7971,
	"./pt-br.js": 7971,
	"./pt.js": 9520,
	"./ro": 6459,
	"./ro.js": 6459,
	"./ru": 1793,
	"./ru.js": 1793,
	"./sd": 950,
	"./sd.js": 950,
	"./se": 490,
	"./se.js": 490,
	"./si": 124,
	"./si.js": 124,
	"./sk": 4249,
	"./sk.js": 4249,
	"./sl": 4985,
	"./sl.js": 4985,
	"./sq": 1104,
	"./sq.js": 1104,
	"./sr": 9131,
	"./sr-cyrl": 9915,
	"./sr-cyrl.js": 9915,
	"./sr.js": 9131,
	"./ss": 5893,
	"./ss.js": 5893,
	"./sv": 8760,
	"./sv.js": 8760,
	"./sw": 1172,
	"./sw.js": 1172,
	"./ta": 7333,
	"./ta.js": 7333,
	"./te": 3110,
	"./te.js": 3110,
	"./tet": 2095,
	"./tet.js": 2095,
	"./tg": 7321,
	"./tg.js": 7321,
	"./th": 9041,
	"./th.js": 9041,
	"./tk": 9005,
	"./tk.js": 9005,
	"./tl-ph": 5768,
	"./tl-ph.js": 5768,
	"./tlh": 9444,
	"./tlh.js": 9444,
	"./tr": 2397,
	"./tr.js": 2397,
	"./tzl": 8254,
	"./tzl.js": 8254,
	"./tzm": 1106,
	"./tzm-latn": 699,
	"./tzm-latn.js": 699,
	"./tzm.js": 1106,
	"./ug-cn": 9288,
	"./ug-cn.js": 9288,
	"./uk": 7691,
	"./uk.js": 7691,
	"./ur": 3795,
	"./ur.js": 3795,
	"./uz": 6791,
	"./uz-latn": 588,
	"./uz-latn.js": 588,
	"./uz.js": 6791,
	"./vi": 5666,
	"./vi.js": 5666,
	"./x-pseudo": 4378,
	"./x-pseudo.js": 4378,
	"./yo": 5805,
	"./yo.js": 5805,
	"./zh-cn": 3839,
	"./zh-cn.js": 3839,
	"./zh-hk": 1500,
	"./zh-hk.js": 1500,
	"./zh-mo": 9807,
	"./zh-mo.js": 9807,
	"./zh-tw": 4152,
	"./zh-tw.js": 4152
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 6700;

/***/ }),

/***/ 764:
/***/ (function(__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(7294);
// EXTERNAL MODULE: ./node_modules/react-dom/index.js
var react_dom = __webpack_require__(3935);
// EXTERNAL MODULE: ./node_modules/react-router-dom/dist/index.js
var dist = __webpack_require__(9655);
// EXTERNAL MODULE: ./node_modules/axios/lib/axios.js + 39 modules
var axios = __webpack_require__(8648);
// EXTERNAL MODULE: ./node_modules/axios-service/index.js
var axios_service = __webpack_require__(1127);
;// CONCATENATED MODULE: ./requestIntercept/index.ts
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};


// import loading from 'components/loading'
// import $user from 'user'
var userInfo = JSON.parse(window.localStorage.getItem('user') || '{}');
var setTicketToHeader = function (config) {
    var headers = config.headers;
    headers.userId = userInfo.userId;
    console.log(headers);
    // headers.ticket = cookie.getItem('ticket') || window.localStorage.getItem('ticket')
    // if (window.localStorage.getItem('mail')) {
    //   headers.mail = window.localStorage.getItem('mail')
    //   headers['Auth-Type'] = window.localStorage.getItem('Auth-Type')
    // }
};
var setTicketToParams = function (config) {
    var _a = config.params, params = _a === void 0 ? {} : _a;
    config.params = __assign({}, params);
};
// const TIME_OUT = 5000
// const TIME_OUT = 3e+4;
var TIME_OUT = 10 * 60 * 1000;
axios_service["default"].init(axios/* default */.Z, {
    requestDefaults: {
        // 目前还没实现, 预计在下个版本中处理
        autoLoading: true,
        // response.data下面的配置
        // server端请求msg(
        msgKey: 'msg',
        // server端数据的key
        dataKey: 'data',
        // server端请求状态的key
        codeKey: 'code',
        // server端请求成功的状态, 注意: 此为response.data下该接口请求成功状态码, 非浏览器中http请求返回的成功状态(200)
        successCode: 0
    }
});
// 超时时间
axios/* default.defaults.timeout */.Z.defaults.timeout = TIME_OUT;
// 打开withCredentials
axios/* default.defaults.withCredentials */.Z.defaults.withCredentials = true;
// 请求拦截器
axios/* default.interceptors.request.use */.Z.interceptors.request.use(function (config) {
    if (config.autoLoading === undefined || config.autoLoading === true) {
        // loading.show();
    }
    // 把 ticket 放入 header 和 query 中，按需选用
    setTicketToHeader(config);
    setTicketToParams(config);
    return config;
}, function (error) {
    // loading.hide();
    console.error('加载超时');
    return Promise.reject(error);
});
// 响应拦截器
axios/* default.interceptors.response.use */.Z.interceptors.response.use(function (data) {
    var autoLoading = data.config.autoLoading;
    if (autoLoading === undefined || autoLoading === true) {
        // loading.hide()
    }
    // todo 返回 ticket 过期则退出
    /**
     * 处理status为0的情况
     */
    // else if (Object.prototype.hasOwnProperty.call(data.data, 'dm_error')) {
    //   data.data.dm_error = 0
    // }
    return data;
}, function (error) {
    // loading.hide();
    return Promise.reject(error);
});

// EXTERNAL MODULE: ./node_modules/react-router/dist/index.js
var react_router_dist = __webpack_require__(9250);
// EXTERNAL MODULE: ./node_modules/antd-mobile/es/index.js + 209 modules
var es = __webpack_require__(2614);
// EXTERNAL MODULE: ./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js + 2 modules
var redux_toolkit_esm = __webpack_require__(9639);
;// CONCATENATED MODULE: ./requestConfig/build.ts
/**
 * build 层配置信息
 * 注意: build层是基于node的, 不能用import等语法, 不能对讲exports出去的对象给pages进行计算, 不能有window等对象,
 */
// const process = require('process')
var IS_DEV = false; // process && process.env.NODE_ENV === 'development';
var PROD_CONF = {};
var DEV_CONF = {};
var CONFIG = {
    IS_DEV: IS_DEV,
    DEV: DEV_CONF,
    PROD: PROD_CONF,
    ENV: {
        SSO_LOGIN: true,
        PHONE_LOGIN: false
    }
};
// module.exports = CONFIG;
/* harmony default export */ var build = (CONFIG);

;// CONCATENATED MODULE: ./requestConfig/index.ts
var requestConfig_assign = (undefined && undefined.__assign) || function () {
    requestConfig_assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return requestConfig_assign.apply(this, arguments);
};

var requestConfig_IS_DEV = build.IS_DEV;
var HOST = window.location.host;
var ORIGIN = window.location.origin;
var PATHNAME = window.location.pathname;
var SERACH = window.location.search;
var prodRootMap = {
    'mystery.tuanzhzh.com': {
        root: 'https://mystery.tuanzhzh.com/'
    }
};
var rootObj = prodRootMap[Object.keys(prodRootMap).find(function (key) { return HOST.indexOf(key) === 0; })] || {};
var DEFAULT_ROOT = '/';
var getRootStr = function (rootStr) {
    return rootStr || DEFAULT_ROOT;
};
var PROD = {
    APIS: {
        uploadMediaRoot: getRootStr(rootObj.uploadMediaRoot),
        uploadRoot: getRootStr(rootObj.uploadRoot),
        flowRoot: getRootStr(rootObj.flowRoot),
        root: getRootStr(rootObj.root),
        authRoot: getRootStr(rootObj.authRoot)
    }
};
var DEV = {
    APIS: {
        uploadMediaRoot: DEFAULT_ROOT,
        uploadRoot: DEFAULT_ROOT,
        flowRoot: DEFAULT_ROOT,
        root: DEFAULT_ROOT,
        authRoot: DEFAULT_ROOT
    }
};
var ssoService = encodeURIComponent("".concat(ORIGIN + PATHNAME + SERACH));
// 开发环境权限总开关 false - 关闭权限菜单， true - 开启权限菜单
var devAuthority = true;
var OBJ = requestConfig_assign(requestConfig_assign(requestConfig_assign({ SUPER_ADMIN: ['wanghl@inke.cn', 'lin@inke.cn'], IS_DEV: requestConfig_IS_DEV, USER_INFO_MOCK: false, 
    // 手机登录情况下，登录页面路由地址
    PHONE_LOGGIN_PATH: 'login', SSO_PAGE_SERVICE: "http://sso.inkept.cn/?service=".concat(ssoService), SSO_PAGE_URL: 'http://sso.inkept.cn', SSO_LOGOUT_PAGE_SERVICE: "https://sso.inkept.cn/api/v1/user/logout/?service=".concat(ssoService), build: build }, build.ENV), requestConfig_IS_DEV ? DEV : PROD), { 
    // 该系统权限标识，获取请联系 @李宁，2 为测试系统
    // http://wiki.inkept.cn/pages/viewpage.action?pageId=50851740
    AUTH_SYSTEM_ID: 2, 
    // 系统中文名称
    SYSTEM_CHINA_NAME: '固定资产管理系统 ', 
    // 系统英文缩写
    SYSTEM_US_NAME: 'Legal', 
    // 系统地址
    SYSTEM_URL: 'legal.inkept.cn', 
    // 权限总开关 false - 关闭权限菜单， true - 开启权限菜单
    authority: requestConfig_IS_DEV ? devAuthority : true, 
    // 使用情况监控，获取请联系 @赵通，-1 则全局关闭监控
    // http://wiki.inkept.cn/pages/viewpage.action?pageId=54597351
    LOG_SYSTEM_SOURCE: -1 });
/* harmony default export */ var requestConfig = (OBJ);

;// CONCATENATED MODULE: ./src/apis.ts


var root = requestConfig.APIS.root;
var _a = (0,axios_service.getRequestsByRoot)({ root: root }), post = _a.post, get = _a.get;
/**
 * @overview 如果系统有统一的错误信息处理，请将 @errorMessageDecorator 注释
 */
var Apis = /** @class */ (function () {
    function Apis() {
        /**
         * 获取验证码
         */
        this.getVerifyCode = post('/api/mystery/user/register/phone/verifyCode');
        /**
         * 注册
         */
        this.registerFromPhone = post('/api/mystery/user/register/phone');
        /**
         * 登录
         */
        this.login = post('/api/mystery/user/login/phone');
        /**
         * 用户-找回密码
         */
        this.getBackPwd = post('/api/mystery/user/password/reset');
        /**
         * 用户-钥匙数量信息
         */
        this.getKeyMessage = get('/api/mystery/user/keyInfo');
        /**
         * 用户-抖币信息
         */
        this.getDymoney = get('/api/mystery/user/dymoney');
        /**
         * 【首页】飘屏
         */
        this.getFloatScreen = get('/api/mystery/announce/floatScreen');
        /**
         * 【首页】公屏
         */
        this.getCommonScreen = get('/api/mystery/announce/commonScreen');
        /**
         * 【首页】盲盒-开
         */
        this.lotteryDraw = post('/api/mystery/box/lottery/draw');
        /**
         * 获取钥匙数量
         */
        this.getKeys = get('/api/mystery/user/keyInfo');
        /**
         * 【抖币】抖币-提取记录
         */
        this.getCoinHostory = post('/api/mystery/dymoney/draw/history');
        /**
         * 【用户】用户-抖币信息
         */
        this.getCoinInfo = get('/api/mystery/user/dymoney');
        /**
         * 【抖币】抖币-提取
         */
        this.coinExtract = post('/api/mystery/dymoney/draw');
        /**
         * 【首页】钥匙-充值-钥匙信息列表
         */
        this.rechargeKeysList = get('/api/mystery/key/deposit/list');
        /**
         * 【首页】钥匙-充值-预支付-微信
         */
        this.prepareWx = post('/api/mystery/key/deposit/prepare/wx');
        /**
         * 【支付】钥匙-充值-预支付-支付宝
         */
        this.prepareAliPay = post('/api/mystery/key/deposit/prePay/ali');
        /**
         * 【抖币】抖币提取-抖音号记录
         */
        this.getDyIds = get('/api/mystery/dymoney/draw/history/dyId');
        /**
         * 【盲盒】盲盒-记录
         */
        this.getLotteryHistory = post('/api/mystery/box/lottery/history');
    }
    return Apis;
}());
var ServiceApis = (/* unused pure expression or super */ null && (Apis));
/* harmony default export */ var apis = (new Apis());

;// CONCATENATED MODULE: ./src/pages/Home/store.ts
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (g && (g = 0, op[0] && (_ = 0)), _) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var store_a;




var Context = react.createContext(null);
var initialState = {
    viewModal: {
        visible: false,
        type: 3,
        num: 0
    },
    detailModal: {
        visible: false
    },
    lotteryModal: {
        visible: false,
        currentBoxType: 3,
        lotteryDataSource: {}
    },
    keyInfo: [{
            keyType: 3,
            keyCount: 0
        }, {
            keyType: 4,
            keyCount: 0
        }, {
            keyType: 5,
            keyCount: 0
        }],
    commonScreenData: []
};
var reduxSlice = (0,redux_toolkit_esm/* createSlice */.oM)({
    name: 'reduxSlice',
    initialState: initialState,
    reducers: {
        // support Immer
        setViewModal: function (state, _a) {
            var payload = _a.payload;
            state.viewModal = payload;
        },
        setDetailModal: function (state, _a) {
            var payload = _a.payload;
            state.detailModal = payload;
        },
        setLotteryModal: function (state, _a) {
            var payload = _a.payload;
            state.lotteryModal = payload;
        },
        setKeyInfo: function (state, _a) {
            var payload = _a.payload;
            state.keyInfo = payload;
        },
        setCommonScreenData: function (state, _a) {
            var payload = _a.payload;
            state.commonScreenData = payload;
        }
    }
});
// Action creators are generated for each case reducer function
var setViewModal = (store_a = reduxSlice.actions, store_a.setViewModal), setDetailModal = store_a.setDetailModal, setLotteryModal = store_a.setLotteryModal, setKeyInfo = store_a.setKeyInfo, setCommonScreenData = store_a.setCommonScreenData;
// 获取钥匙数量
var getKeys = function (query) { return function (dispatch) { return __awaiter(void 0, void 0, void 0, function () {
    var res;
    var _a;
    return __generator(this, function (_b) {
        switch (_b.label) {
            case 0: return [4 /*yield*/, apis.getKeys(query).catch(function (err) {
                    es/* Toast.show */.FN.show({
                        content: err.msg
                    });
                })];
            case 1:
                res = _b.sent();
                dispatch(setKeyInfo((_a = res.data.keyCountInfoList) !== null && _a !== void 0 ? _a : []));
                return [2 /*return*/];
        }
    });
}); }; };
// 获取公屏信息
var getCommonScreen = function () { return function (dispatch) { return __awaiter(void 0, void 0, void 0, function () {
    var res, tempArr;
    var _a;
    return __generator(this, function (_b) {
        switch (_b.label) {
            case 0: return [4 /*yield*/, apis.getCommonScreen().catch(function (err) {
                    es/* Toast.show */.FN.show({
                        content: err.msg
                    });
                })];
            case 1:
                res = _b.sent();
                tempArr = [];
                (_a = res.data) === null || _a === void 0 ? void 0 : _a.forEach(function (item) {
                    tempArr.push({
                        userName: item.user.nickName,
                        giftName: item.gift.giftName,
                        dyMoneyAmount: item.gift.dyMoneyAmount
                    });
                });
                tempArr = tempArr.concat(tempArr);
                dispatch(setCommonScreenData(tempArr));
                return [2 /*return*/];
        }
    });
}); }; };
// 开盲盒
var lotteryDraw = function (query) {
    return function (dispatch) { return __awaiter(void 0, void 0, void 0, function () {
        var res;
        var _a, _b;
        return __generator(this, function (_c) {
            switch (_c.label) {
                case 0:
                    es/* Toast.show */.FN.show({
                        icon: 'loading',
                        content: '加载中…'
                    });
                    return [4 /*yield*/, apis.lotteryDraw(query)];
                case 1:
                    res = _c.sent();
                    if (res.data.drawSuccess) {
                        es/* Toast.clear */.FN.clear();
                        dispatch(setLotteryModal({
                            visible: true,
                            currentBoxType: (_a = query.keyInfo) === null || _a === void 0 ? void 0 : _a.keyType,
                            lotteryDataSource: (_b = res.data.lottery) !== null && _b !== void 0 ? _b : {}
                        }));
                        dispatch(getKeys({
                            userId: query.userId
                        }));
                        dispatch(getCommonScreen());
                    }
                    else {
                        es/* Toast.show */.FN.show({
                            content: res.data.drawFailedMsg
                        });
                        setTimeout(function () {
                            es/* Toast.clear */.FN.clear();
                        }, 1000);
                    }
                    return [2 /*return*/];
            }
        });
    }); };
};
// Reducer
/* harmony default export */ var store = (reduxSlice.reducer);

;// CONCATENATED MODULE: ./src/pages/Component/RollingList/index.tsx




var RollingList = function () {
    var _a = (0,react.useContext)(Context), state = _a.state, dispatch = _a.dispatch;
    var commonScreenData = state.commonScreenData;
    (0,react.useEffect)(function () {
        dispatch(getCommonScreen());
    }, []);
    (0,react.useEffect)(function () {
        if (commonScreenData.length) {
            // const a = document.getElementById('listItem0')
            // a.style.transform = 'translate3d(0,' + (- index * clientHeight) + 'px,0)'
            // const arr = document.getElementsByClassName('list-item')
            // const tempArr = Array.from(arr)
            // tempArr.forEach((item: any, i) => {
            //   item.style.transform = 'translate3d(0,' + (- (i + 1) * item.getBoundingClientRect().height) + 'px, 0)'
            // })
        }
    }, [commonScreenData]);
    return react.createElement("div", { className: 'rolling-list-wrapper' },
        react.createElement("div", { className: 'list-content' }, commonScreenData.map(function (item, i) {
            return react.createElement("div", { className: 'list-item', id: "listItem".concat(i), key: i },
                react.createElement("span", null,
                    react.createElement("label", { className: 'list-item-name' }, item.userName.replace(/^(\d{3})\d{4}(\d+)/, '$1****$2')),
                    react.createElement("label", { className: 'list-item-prize-name' },
                        "\u5F00\u51FA\u4E86", "\u201D".concat(item.giftName, "\u201C"))),
                react.createElement("span", null,
                    react.createElement("label", { className: 'list-item-value' }, "\u4EF7\u503C\u6296\u5E01"),
                    react.createElement("label", { className: 'list-item-num' }, item.dyMoneyAmount)));
        })),
        !commonScreenData.length && react.createElement(es/* ErrorBlock */.iE, { className: 'err-block', title: null, image: 'https://cdn.tuanzhzh.com/doubi-image/home-empty.png', description: react.createElement("span", null, "\u6682\u65E0\u5F00\u5956\u4FE1\u606F") }));
};
/* harmony default export */ var Component_RollingList = (RollingList);

;// CONCATENATED MODULE: ./src/pages/Component/TopRolling/index.tsx




var TopRolling = function () {
    var _a = (0,react.useState)([]), dataList = _a[0], setDataList = _a[1];
    // 获取飘屏内容
    var getFloatScreen = function () {
        apis.getFloatScreen().then(function (res) {
            var _a;
            setDataList((_a = res.data) !== null && _a !== void 0 ? _a : []);
        }, function (err) {
            console.log(err);
            es/* Toast.show */.FN.show({
                icon: 'fail',
                content: err.msg
            });
        });
    };
    (0,react.useEffect)(function () {
        getFloatScreen();
    }, []);
    return react.createElement("div", { className: 'top-rolling-wrapper' },
        react.createElement("div", { className: 'top-rolling-content' }, [1, 2].map(function (list) {
            return react.createElement("ul", { className: 'top-rolling-ul', key: list }, dataList.map(function (item, i) {
                return react.createElement("li", { key: i, className: 'item-list-li' },
                    react.createElement("span", { className: 'float-title' }, "\u606D\u559C"),
                    react.createElement("span", { className: 'float-user-name' }, item.user.nickName.replace(/^(\d{3})\d{4}(\d+)/, '$1****$2') || '游客'),
                    react.createElement("span", { className: 'float-open-title' }, "\u5F00\u51FA\u4E86"),
                    react.createElement("span", { className: 'float-open-gift-name' }, item.gift.giftName),
                    react.createElement("img", { src: item.gift.bigPicUrl, className: 'notice-content-lottery' }),
                    react.createElement("span", { className: 'doubi-value' }, "\u4EF7\u503C\u6296\u5E01"),
                    react.createElement("span", { className: 'doubi-number' }, item.gift.dyMoneyAmount));
            }));
        })));
};
/* harmony default export */ var Component_TopRolling = (TopRolling);

;// CONCATENATED MODULE: ./src/pages/Component/UseEnhancedReducer/index.ts
/**
 * 自定义增强型 useReducer
 * 在 react useReducer 基础上，增加 redux-thunk 和 redux-promise 功能
 * 即：
 * 1. 支持 function 类型的 action
 * 2. 支持 Promise 类型的 action.payload
 * 3. 支持 getState 方法，获取实时 state
 * 参考：
 * https://medium.com/@joseph.michael.sample/async-actions-with-usereducer-d75a2c5dc55c
 * https://medium.com/solute-labs/configuring-thunk-action-creators-and-redux-dev-tools-with-reacts-usereducer-hook-5a1608476812
 */

var useEnhancedReducer = function (reducer, initialState) {
    // 使用 useRef , 实现 getState 获取最新 state
    var lastState = (0,react.useRef)(initialState);
    // 将 handleActions 处理好的 reducer 包裹一层，将每次 reducer 计算出的最新 state 赋值给 ref 对象
    var reducerWapper = (0,react.useCallback)(function (state, action) {
        var result = reducer(state, action);
        lastState.current = result;
        return result;
    }, [reducer]);
    var _a = (0,react.useReducer)(reducerWapper, initialState), state = _a[0], dispatch = _a[1];
    var getState = (0,react.useCallback)(function () { return lastState.current; }, []);
    var enhancedDispatch = (0,react.useCallback)(function (action) {
        // 支持 function 类型的 action
        if (typeof action === 'function') {
            return action(enhancedDispatch, getState);
        }
        else {
            // 让 dispatch 支持 promise 类型的 action
            if (action.payload instanceof Promise) {
                return action.payload.then(function (result) {
                    return dispatch({ type: action.type, payload: result });
                });
            }
            else {
                return dispatch(action);
            }
        }
    }, [getState]);
    return [state, enhancedDispatch, getState];
};
/* harmony default export */ var UseEnhancedReducer = (useEnhancedReducer);

;// CONCATENATED MODULE: ./src/pages/Home/component/RechargeKey/index.tsx
var RechargeKey_assign = (undefined && undefined.__assign) || function () {
    RechargeKey_assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return RechargeKey_assign.apply(this, arguments);
};
var _this = undefined;





var keyMap = {
    3: 'https://cdn.tuanzhzh.com/doubi-image/tong-yaoshi.png',
    4: 'https://cdn.tuanzhzh.com/doubi-image/yin-yaoshi.png',
    5: 'https://cdn.tuanzhzh.com/doubi-image/jin-yaoshi.png'
};
var RechargeKey = function () {
    var _a, _b;
    var _c = (0,react.useState)(-1), active = _c[0], setActive = _c[1];
    var _d = (0,react.useState)(false), payVisible = _d[0], setPayVisible = _d[1];
    var _e = (0,react.useState)({}), keysListInfo = _e[0], setKeysListInfo = _e[1];
    var _f = (0,react.useState)({}), rechargeKeyInfo = _f[0], setRechargeKeyInfo = _f[1];
    var _g = (0,react.useState)(''), htmlText = _g[0], setHtmlText = _g[1];
    var _h = (0,react.useContext)(Context), state = _h.state, dispatch = _h.dispatch;
    var viewModal = state.viewModal;
    var userInfo = JSON.parse(window.localStorage.getItem('user') || '{}');
    var closeModal = function () {
        dispatch(setViewModal(RechargeKey_assign(RechargeKey_assign({}, viewModal), { visible: false })));
    };
    var closePay = function () {
        setPayVisible(false);
    };
    var selectItem = function (index, num) {
        setActive(index);
        setPayVisible(true);
        setRechargeKeyInfo({
            keyInfo: {
                keyType: viewModal.type,
                keyCount: num * 1
            }
        });
    };
    var aliPay = function () {
        // setHtmlText('')
        // console.log(document.forms[0].submit())
        es/* Toast.show */.FN.show({
            icon: 'loading',
            content: '加载中…'
        });
        apis.prepareAliPay(RechargeKey_assign({ userId: userInfo.userId }, rechargeKeyInfo)).then(function (res) {
            var _a;
            console.log(res.data);
            setHtmlText((_a = res.data.payForm) !== null && _a !== void 0 ? _a : '');
            document.forms[0].submit();
        }, function () {
            es/* Toast.show */.FN.show({
                content: '支付异常，稍后重试'
            });
        }).finally(function () {
            es/* Toast.clear */.FN.clear();
        });
    };
    // 获取钥匙列表
    var rechargeKeysList = function () {
        apis.rechargeKeysList({
            keyType: viewModal.type
        }).then(function (res) {
            var _a, _b;
            var tempArr = ((_a = res.data) === null || _a === void 0 ? void 0 : _a.filter(function (item) { return item.keyType === viewModal.type; })) || [];
            setKeysListInfo((_b = tempArr[0]) !== null && _b !== void 0 ? _b : {});
        });
    };
    (0,react.useEffect)(function () {
        if (viewModal.visible) {
            setActive(-1);
            rechargeKeysList();
        }
    }, [viewModal.visible]);
    return react.createElement("div", { className: 'recharge-key-wrapper' },
        react.createElement(es/* Mask */.zd, { visible: viewModal.visible, opacity: 0.8 },
            react.createElement("div", { className: 'recharge-key-content' },
                react.createElement("img", { onClick: closeModal, className: 'recharge-key-close-icon', src: 'https://cdn.tuanzhzh.com/doubi-image/close-modal-icon.png' }),
                react.createElement("div", { className: 'recharge-key-title' },
                    react.createElement("span", { className: 'recharge-name' }, "\u6700\u9AD8\u53EF\u591A\u8D60"),
                    react.createElement("span", { className: 'recharge-key-gift-num' }, (_a = keysListInfo.extraKeyMaxAllCount) !== null && _a !== void 0 ? _a : 0),
                    react.createElement("img", { className: 'recharge-key-icon', src: keyMap[viewModal.type] })),
                react.createElement("div", { className: 'recharge-key-item-content' }, (_b = keysListInfo.extraKeyInfoList) === null || _b === void 0 ? void 0 : _b.map(function (item, i) {
                    return react.createElement("div", { key: i, className: 'key-item-wrapper' },
                        react.createElement("div", { onClick: selectItem.bind(_this, i, item.keyCount), className: active === i ? 'key-item active' : 'key-item' },
                            react.createElement("img", { className: 'key-item-icon', src: keyMap[viewModal.type] }),
                            react.createElement("span", { className: 'key-item-num' },
                                item.allKeyCount,
                                "\u628A")),
                        react.createElement("div", { className: 'key-item-gift-text' },
                            react.createElement("span", null, "\u5DF2\u8D60\u9001"),
                            react.createElement("span", null,
                                item.extraRatio,
                                "%")),
                        react.createElement("div", { className: 'key-item-gift-money' },
                            (item.price / 100).toFixed(2),
                            "\u5143"));
                })),
                react.createElement("div", { className: 'recharge-key-bottom-show' },
                    "\u60A8\u5F53\u524D\u6709",
                    react.createElement("span", null, viewModal.num),
                    "\u628A",
                    react.createElement("img", { className: 'recharge-key-icon bottom-show-key', src: keyMap[viewModal.type] })))),
        react.createElement(es/* Mask */.zd, { visible: payVisible, opacity: 0.8 },
            react.createElement("div", { className: 'pay-content' },
                react.createElement("img", { onClick: closePay, className: 'pay-close-icon', src: 'https://cdn.tuanzhzh.com/doubi-image/close-modal-icon.png' }),
                react.createElement("div", { className: 'pay-title' }, "\u8BF7\u9009\u62E9\u652F\u4ED8\u65B9\u5F0F"),
                react.createElement("div", { className: 'pay-way-content' },
                    react.createElement("div", { className: 'pay-way-item pay-way-item-wechat' },
                        react.createElement("img", { src: 'https://cdn.tuanzhzh.com/doubi-image/wechat.png' }),
                        react.createElement("span", { className: 'pay-item-text' }, "\u5FAE\u4FE1\u652F\u4ED8")),
                    react.createElement("div", { className: 'pay-way-item', onClick: aliPay },
                        react.createElement("img", { src: 'https://cdn.tuanzhzh.com/doubi-image/alipay.png' }),
                        react.createElement("span", { className: 'pay-item-text' }, "\u652F\u4ED8\u5B9D\u652F\u4ED8")))),
            react.createElement("div", { dangerouslySetInnerHTML: { __html: htmlText } })));
};
/* harmony default export */ var component_RechargeKey = (RechargeKey);

;// CONCATENATED MODULE: ./src/pages/Home/component/DetailDescription/index.tsx




var DetailDescription = function () {
    var _a = (0,react.useContext)(Context), state = _a.state, dispatch = _a.dispatch;
    var detailModal = state.detailModal;
    var closeModal = function () {
        dispatch(setDetailModal({
            visible: false
        }));
    };
    return react.createElement("div", { className: 'detail-description-wrapper' },
        react.createElement(es/* Mask */.zd, { visible: detailModal.visible, opacity: 0.8 },
            react.createElement("div", { className: 'detail-description-content' },
                react.createElement("img", { onClick: closeModal, className: 'detail-close-icon', src: 'https://cdn.tuanzhzh.com/doubi-image/close-modal-icon.png' }),
                react.createElement("div", { className: 'detail-title' }, "\u8BE6\u7EC6\u8BF4\u660E"),
                react.createElement("ul", { className: 'detail-description-ul' },
                    react.createElement("li", null, "1. \u4E0D\u540C\u7684\u76D2\u5B50\u5185\u4EA7\u51FA\u7684\u793C\u7269\u4E0D\u540C\u3002"),
                    react.createElement("li", null, "2. \u4E0D\u540C\u7C7B\u578B\u7684\u76D2\u5B50\u4EC5\u53EF\u4F7F\u7528\u5BF9\u5E94\u7684\u94A5\u5319\u5F00\u542F\uFF0C\u5982\u201C\u94F6\u5149\u76D2\u5B50\u201D\u4EC5\u53EF\u4F7F\u7528\u201C\u94F6\u94A5\u5319\u201D\u5F00\u542F\u3002"),
                    react.createElement("li", null, "3. \u6240\u6709\u76D2\u5B50\u5747\u6709\u673A\u4F1A\u4EA7\u51FA\u81F3\u5C0A\u793C\u7269\uFF0C\u81F3\u5C0A\u5927\u5956\u5305\u542B\u201C\u5609\u5E74\u534E\u201D\u3001\u201C\u7CD6\u679C\u98DE\u8239\u201D\u3001\u201C\u706B\u7BAD\u3002"),
                    react.createElement("li", null, "4. \u60A8\u83B7\u5F97\u7684\u793C\u7269\uFF0C\u5C06\u5728\u60A8\u786E\u8BA4\u63D0\u53D6\u540E\uFF0C\u4EE5\u6296\u5E01\u7684\u5F62\u5F0F\u8FDB\u5165\u5230\u60A8\u6307\u5B9A\u7684\u8D26\u6237\u4E2D\u3002"),
                    react.createElement("li", null, "5. \u6BCF\u4E00\u79CD\u76D2\u5B50\u5728 80 \u6B21\u5F00\u542F\u5185\u5FC5\u51FA\u81F3\u5C11 1 \u4EF6\u91D1\u8272\u793C\u7269\u3002"),
                    react.createElement("li", null, "6. \u91D1\u8272\u793C\u7269\u5206\u522B\u4E3A\uFF1A\u94DC\u8D28\u76D2\u5B50\u3010\u201C\u7231\u7684\u5B88\u62A4\u201D\u3001\u201C\u58A8\u955C\u201D\u3011\uFF0C\u94F6\u5149\u76D2\u5B50\u3010\u201C\u4FDD\u65F6\u6377\u201D\u3001\u201C\u771F\u7684\u7231\u4F60\u201D\u3011\uFF0C\u91D1\u95EA\u76D2\u5B50\u3010\u201CDisco\u201D\u3001\u201C\u79C1\u4EBA\u98DE\u673A\u201D\u3011\u3002"),
                    react.createElement("li", { className: 'probability-li' }, "\u6982\u7387\u5206\u5E03\uFF1A"),
                    react.createElement("li", null, "\u81F3\u5C0A\u793C\u7269\uFF1A1%\uFF08\u989D\u5916\u6982\u7387\uFF09"),
                    react.createElement("li", null, "\u91D1\u8272\u793C\u7269\uFF1A5%"),
                    react.createElement("li", null, "\u7D2B\u8272\u793C\u7269\uFF1A15%"),
                    react.createElement("li", null, "\u84DD\u8272\u793C\u7269\uFF1A50%"),
                    react.createElement("li", null, "\u767D\u8272\u793C\u7269\uFF1A30%")))));
};
/* harmony default export */ var component_DetailDescription = (DetailDescription);

;// CONCATENATED MODULE: ./src/pages/Home/component/LotteryModal/index.tsx
var LotteryModal_this = undefined;




var Lottery = function () {
    var _a = (0,react.useState)({}), maxValue = _a[0], setMaxValue = _a[1];
    var _b = (0,react.useState)([]), list = _b[0], setList = _b[1];
    var _c = (0,react.useContext)(Context), state = _c.state, dispatch = _c.dispatch;
    var lotteryModal = state.lotteryModal;
    var userInfo = JSON.parse(window.localStorage.getItem('user') || '{}');
    // const userInfo = JSON.parse(window.localStorage.getItem('user') || '{}')
    var closeModal = function () {
        dispatch(setLotteryModal({
            visible: false
        }));
    };
    var showLotteryModal = function (num) {
        dispatch(lotteryDraw({
            userId: userInfo.userId,
            keyInfo: {
                keyType: lotteryModal.currentBoxType,
                keyCount: num
            }
        }));
    };
    (0,react.useEffect)(function () {
        var _a, _b, _c, _d, _e;
        var index = (_b = (_a = lotteryModal.lotteryDataSource) === null || _a === void 0 ? void 0 : _a.giftList) === null || _b === void 0 ? void 0 : _b.findIndex(function (item) { var _a; return item.giftId === ((_a = lotteryModal.lotteryDataSource) === null || _a === void 0 ? void 0 : _a.maxValueGiftId); });
        var findObj = ((_d = (_c = lotteryModal.lotteryDataSource) === null || _c === void 0 ? void 0 : _c.giftList) === null || _d === void 0 ? void 0 : _d.find(function (item) { var _a; return item.giftId === ((_a = lotteryModal.lotteryDataSource) === null || _a === void 0 ? void 0 : _a.maxValueGiftId); })) || {};
        setMaxValue(findObj);
        var tempArr = JSON.parse(JSON.stringify(((_e = lotteryModal.lotteryDataSource) === null || _e === void 0 ? void 0 : _e.giftList) || []));
        tempArr.splice(index, 1);
        setList(tempArr);
    }, [lotteryModal]);
    return react.createElement("div", { className: 'lottery-wrapper' },
        react.createElement(es/* Mask */.zd, { visible: lotteryModal.visible },
            react.createElement("div", { className: 'lottery-content' },
                react.createElement("img", { onClick: closeModal, className: 'lottery-close-icon', src: 'https://cdn.tuanzhzh.com/doubi-image/close-modal-icon.png' }),
                react.createElement("div", { className: 'max-value-lottery' },
                    react.createElement("img", { src: maxValue.bigPicUrl })),
                react.createElement("ul", { className: 'lottery-list-ul' }, list.map(function (item, i) {
                    return react.createElement("li", { className: 'lottery-list-item', key: i },
                        react.createElement("img", { src: item.smallPicUrl }));
                })),
                react.createElement("div", { className: 'lottery-box-xiang-btn-wrapper' },
                    react.createElement(es/* Button */.zx, { shape: 'rounded', className: 'one-key-btn', onClick: showLotteryModal.bind(LotteryModal_this, 1) },
                        react.createElement("span", { className: 'one-key-bg-icon' }),
                        react.createElement("span", null, "X 1")),
                    react.createElement(es/* Button */.zx, { shape: 'rounded', className: 'ten-key-btn', onClick: showLotteryModal.bind(LotteryModal_this, 10) },
                        react.createElement("span", { className: 'ten-key-bg-icon' }),
                        react.createElement("span", null, "X 10"))))));
};
/* harmony default export */ var LotteryModal = (Lottery);

;// CONCATENATED MODULE: ./src/pages/Home/index.tsx
var Home_assign = (undefined && undefined.__assign) || function () {
    Home_assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return Home_assign.apply(this, arguments);
};
var Home_this = undefined;

// import Api from './apis'



// import TopRolling from '@pages/Component/TopRolling'






// import Apis from 'src/apis'

var boxMap = {
    3: 'https://cdn.tuanzhzh.com/doubi-image/tong-box.png',
    4: 'https://cdn.tuanzhzh.com/doubi-image/yin-box.png',
    5: 'https://cdn.tuanzhzh.com/doubi-image/gold-box.png'
};
var keyIcon = {
    3: 'https://cdn.tuanzhzh.com/doubi-image/tong-yaoshi.png',
    4: 'https://cdn.tuanzhzh.com/doubi-image/yin-yaoshi.png',
    5: 'https://cdn.tuanzhzh.com/doubi-image/jin-yaoshi.png'
};
var Home = function () {
    var _a = (0,react.useState)(3), currentBox = _a[0], setCurrentBox = _a[1];
    var _b = (0,react.useState)({
        nickName: '请登录',
        avatarUrl: 'https://cdn.tuanzhzh.com/doubi-image/no-login-icon.png'
    }), loginInfo = _b[0], setLoginInfo = _b[1];
    var userInfo = JSON.parse(window.localStorage.getItem('user') || '{}');
    var _c = UseEnhancedReducer(store, initialState), state = _c[0], dispatch = _c[1];
    var navigate = (0,react_router_dist/* useNavigate */.s0)();
    var keyInfo = state.keyInfo;
    var skipLoginPage = function () {
        if (!userInfo.userId) {
            navigate({
                pathname: '/login'
            });
        }
    };
    var extractHandle = function () {
        navigate({
            pathname: '/extract'
        });
    };
    var addRechargeKey = function (type, num) {
        dispatch(setViewModal({
            visible: true,
            num: num,
            type: type
        }));
    };
    var capsuleTabChange = function (key) {
        setCurrentBox(key);
    };
    var showDetailDescription = function () {
        dispatch(setDetailModal({
            visible: true
        }));
    };
    var showLotteryModal = function (num) {
        lotteryDraw(num);
        dispatch(lotteryDraw({
            userId: userInfo.userId,
            keyInfo: {
                keyType: currentBox * 1,
                keyCount: num
            }
        }));
    };
    (0,react.useEffect)(function () {
        if (Object.keys(userInfo).length) {
            dispatch(getKeys({
                userId: userInfo.userId
            }));
            setLoginInfo(Home_assign({}, userInfo));
        }
    }, []);
    return react.createElement(react.Fragment, null,
        react.createElement(Context.Provider, { value: { state: state, dispatch: dispatch } },
            react.createElement("div", { className: 'home-page' },
                react.createElement(Component_TopRolling, { height: 48, speed: 3 }),
                react.createElement("div", { className: 'home-user-wrapper' },
                    react.createElement("span", { className: 'user-portrait' },
                        react.createElement("img", { className: 'portrait-icon', src: loginInfo.avatarUrl || 'https://cdn.tuanzhzh.com/doubi-image/no-login-icon.png' })),
                    react.createElement("span", { className: 'user-name', onClick: skipLoginPage }, loginInfo.nickName || '游客')),
                react.createElement("div", { className: 'home-keys-wrapper' }, keyInfo.map(function (item, i) {
                    return react.createElement("div", { className: 'key-item', key: i },
                        react.createElement("img", { className: 'key-type', src: keyIcon[item.keyType] }),
                        react.createElement("span", { className: 'key-num' }, item.keyCount),
                        react.createElement("span", { className: 'key-add-btn', onClick: addRechargeKey.bind(Home_this, item.keyType, item.keyCount) },
                            react.createElement("img", { className: 'add-plus-icon', src: 'https://cdn.tuanzhzh.com/doubi-image/plus.png' })));
                })),
                react.createElement(es/* Divider */.iz, { className: 'home-keys-divider' }),
                react.createElement(es/* CapsuleTabs */.GC, { className: 'blind-box-btn-wrapper', onChange: capsuleTabChange },
                    react.createElement(es/* CapsuleTabs.Tab */.GC.Tab, { title: '\u94DC\u8D28\u76F2\u76D2', key: 3 }),
                    react.createElement(es/* CapsuleTabs.Tab */.GC.Tab, { title: '\u94F6\u5149\u76F2\u76D2', key: 4 }),
                    react.createElement(es/* CapsuleTabs.Tab */.GC.Tab, { title: '\u91D1\u95EA\u76F2\u76D2', key: 5 })),
                react.createElement("div", { className: 'home-box-xiang-wrapper' },
                    react.createElement("img", { className: 'box-xiang-icon', src: boxMap[currentBox] }),
                    react.createElement("span", { className: 'box-xiang-instructions', onClick: showDetailDescription }, "\u8BE6\u7EC6\u8BF4\u660E")),
                react.createElement("div", { className: 'home-box-xiang-btn-wrapper' },
                    react.createElement(es/* Button */.zx, { shape: 'rounded', className: 'one-key-btn', onClick: showLotteryModal.bind(Home_this, 1) },
                        react.createElement("span", { className: 'one-key-bg-icon' }),
                        react.createElement("span", null, "X 1")),
                    react.createElement(es/* Button */.zx, { shape: 'rounded', className: 'ten-key-btn', onClick: showLotteryModal.bind(Home_this, 10) },
                        react.createElement("span", { className: 'ten-key-bg-icon' }),
                        react.createElement("span", null, "X 10"))),
                react.createElement("div", { className: 'home-doubi-extract', onClick: extractHandle },
                    react.createElement("img", { className: 'doubi-tiqu', src: 'https://cdn.tuanzhzh.com/doubi-image/doubi-tiqu-icon.png' }),
                    react.createElement("span", { className: 'doubi-tiqu-text' }, "\u6296\u5E01\u63D0\u53D6")),
                react.createElement(Component_RollingList, null)),
            react.createElement(component_RechargeKey, null),
            react.createElement(component_DetailDescription, null),
            react.createElement(LotteryModal, null)));
};
/* harmony default export */ var pages_Home = (Home);

// EXTERNAL MODULE: ./node_modules/antd-mobile-icons/es/EyeInvisibleOutline.js
var EyeInvisibleOutline = __webpack_require__(8934);
// EXTERNAL MODULE: ./node_modules/antd-mobile-icons/es/EyeOutline.js
var EyeOutline = __webpack_require__(4080);
;// CONCATENATED MODULE: ./src/store/index.ts
var src_store_a;


var store_Context = react.createContext(null);
var store_initialState = {
    loginCurrentKey: 'login',
    userId: ''
};
var store_reduxSlice = (0,redux_toolkit_esm/* createSlice */.oM)({
    name: 'reduxSlice',
    initialState: store_initialState,
    reducers: {
        setLoginCurrentKey: function (state, _a) {
            var payload = _a.payload;
            state.loginCurrentKey = payload;
        },
        setUserId: function (state, _a) {
            var payload = _a.payload;
            state.userId = payload;
        }
    }
});
// Action creators are generated for each case reducer function
var setLoginCurrentKey = (src_store_a = store_reduxSlice.actions, src_store_a.setLoginCurrentKey), setUserId = src_store_a.setUserId;
// redux-thunk actions
// 拉取是否开通接口
// export const getIsOpen =
//   (query = {}) =>
//   async (dispatch) => {
//     const res = await Apis.getIsOpen(query).catch((err) => {
//       console.log('getIsOpen err', err)
//     })
//     const isOpen = res?.data ?? false
//     dispatch(setIsOpen(isOpen))
//   }
// 数据配置：拉取数据配置列表
// export const getDataTableList = (params) => async (dispatch) => {
//   const res = await Apis.getDataTableList(params).catch((err) => {
//     console.log('getDataTableList err', err)
//     return []
//   })
//   return res?.data
// }
// Reducer
/* harmony default export */ var src_store = (store_reduxSlice.reducer);

;// CONCATENATED MODULE: ./src/pages/Component/LoginForm/index.tsx
var LoginForm_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var LoginForm_generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (g && (g = 0, op[0] && (_ = 0)), _) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};







var LoginForm = function () {
    var _a = (0,react.useState)(false), visible = _a[0], setVisible = _a[1];
    var dispatch = (0,react.useContext)(store_Context).dispatch;
    var form = es/* Form.useForm */.l0.useForm()[0];
    var navigate = (0,react_router_dist/* useNavigate */.s0)();
    var loginHande = (0,react.useCallback)(function () { return LoginForm_awaiter(void 0, void 0, void 0, function () {
        var obj;
        return LoginForm_generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, form.validateFields()];
                case 1:
                    obj = _a.sent();
                    apis.login(obj).then(function (res) {
                        if (res.data.loginResult) {
                            es/* Toast.show */.FN.show({
                                icon: 'success',
                                content: '成功'
                            });
                            window.localStorage.setItem('user', JSON.stringify(res.data.user || {}));
                            dispatch(setUserId(res.data.user.userId));
                            navigate({
                                pathname: '/home'
                            });
                        }
                        else {
                            es/* Toast.show */.FN.show({
                                icon: 'fail',
                                content: res.data.loginMsg
                            });
                        }
                    });
                    return [2 /*return*/];
            }
        });
    }); }, []);
    var forgetPasswordHandle = function () {
        navigate({
            pathname: '/forget'
        });
    };
    // const wechatLogin = () => {
    //   // 小程序appid
    //   // redirect_uri重定向至当前页面
    //   // snsapi_userinfo 用户手动授权
    //   // window.location.href = 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxb48e40dbe585c7f2&redirect_uri=http://192.168.3.143:12345/login&response_type=code&scope=snsapi_userinfo&state=#wechat_redirect'
    //   window.location.href = 'weixin://wap/pay'
    //   // window.ap.chooseImage()
    //   // window.ap.tradePay({
    //   //   tradeNO: '201802282100100427058809844'
    //   // }, function(res){
    //   //   window.ap.alert(res.resultCode);
    //   // });
    // }
    return react.createElement("div", { className: 'login-form-wrapper' },
        react.createElement(es/* Form */.l0, { layout: 'horizontal', form: form },
            react.createElement("div", { className: 'login-item' },
                react.createElement("span", { className: 'login-item-title' }, "\u624B\u673A\u53F7"),
                react.createElement("div", { className: 'login-item-component' },
                    react.createElement(es/* Form.Item */.l0.Item, { noStyle: true, name: 'phoneNum', rules: [{ required: true, message: '请输入手机号' }] },
                        react.createElement(es/* Input */.II, { placeholder: '\u8BF7\u8F93\u516511\u4F4D\u624B\u673A\u53F7', clearable: true, className: 'input-style' })))),
            react.createElement("div", { className: 'login-item' },
                react.createElement("span", { className: 'login-item-title' }, "\u5BC6\u7801"),
                react.createElement("div", { className: 'login-item-component' },
                    react.createElement(es/* Form.Item */.l0.Item, { name: 'passwd', rules: [{ required: true, message: '请输入密码' }], extra: react.createElement("div", { className: 'eye' }, !visible ? (react.createElement(EyeInvisibleOutline/* default */.Z, { onClick: function () { return setVisible(true); } })) : (react.createElement(EyeOutline/* default */.Z, { onClick: function () { return setVisible(false); } }))) },
                        react.createElement(es/* Input */.II, { placeholder: '\u8BF7\u8F93\u5165\u5BC6\u7801', clearable: true, type: visible ? 'text' : 'password', className: 'input-style' }))))),
        react.createElement("div", { className: 'login-btn', onClick: loginHande },
            react.createElement("span", null, "\u767B\u5F55")),
        react.createElement("div", { className: 'forget-password', onClick: forgetPasswordHandle }, "\u5FD8\u8BB0\u5BC6\u7801"));
};
/* harmony default export */ var Component_LoginForm = (LoginForm);

;// CONCATENATED MODULE: ./src/pages/Component/Toast/index.tsx


var Toast = function (props) {
    return react.createElement("div", { className: props.visible ? 'register-toast-tip' : 'hide' },
        react.createElement("span", null, props.content));
};
/* harmony default export */ var Component_Toast = (Toast);

;// CONCATENATED MODULE: ./src/pages/Component/RegisteredForm/index.tsx
var RegisteredForm_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var RegisteredForm_generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (g && (g = 0, op[0] && (_ = 0)), _) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};






var count = 60;
var RegisteredForm = function () {
    var _a = (0,react.useState)('获取验证码'), verificaationText = _a[0], setVerificaationText = _a[1];
    var _b = (0,react.useState)('账号注册成功请登录'), text = _b[0], setText = _b[1];
    var dispatch = (0,react.useContext)(store_Context).dispatch;
    var _c = (0,react.useState)(false), showToast = _c[0], setShowToast = _c[1];
    var form = es/* Form.useForm */.l0.useForm()[0];
    var registerHandle = function () { return RegisteredForm_awaiter(void 0, void 0, void 0, function () {
        var obj;
        return RegisteredForm_generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, form.validateFields()];
                case 1:
                    obj = _a.sent();
                    apis.registerFromPhone(obj).then(function (res) {
                        // 注册成功，跳转到登录
                        if (res.data.registerResult) {
                            es/* Toast.show */.FN.show({
                                icon: 'success',
                                content: '注册成功，请登录'
                            });
                            dispatch(setLoginCurrentKey('login'));
                        }
                        else {
                            setShowToast(true);
                            setText(res.data.registerMsg);
                            setTimeout(function () {
                                setShowToast(false);
                            }, 2000);
                        }
                    });
                    return [2 /*return*/];
            }
        });
    }); };
    var pkgNameRule = {
        pattern: /^1[3-9]\d{9}$/,
        message: '手机号不合法'
    };
    var passwordRule = {
        pattern: /^[a-zA-Z0-9]{8,16}$/,
        message: '8~16位数字、英文混合'
    };
    var getVerificationCode = (0,react.useCallback)(function () {
        if (count < 60)
            return;
        form.validateFields(['phoneNum']).then(function (res) {
            console.log(res.data);
            var timerId = null;
            verificationCode();
            setVerificaationText("".concat(count, " s"));
            timerId = setTimeout(function run() {
                if (count < 1) {
                    clearTimeout(timerId);
                    setVerificaationText('获取验证码');
                    count = 60;
                    return;
                }
                count -= 1;
                timerId = setTimeout(run, 1000);
                setVerificaationText("".concat(count, " s"));
            }, 1000);
        }, function (err) {
            console.log(err);
        });
    }, []);
    var verificationCode = function () {
        apis.getVerifyCode({
            phoneNum: form.getFieldsValue().phoneNum
        }).then(function (res) {
            console.log(res.data);
            if (!res.data.sendResult) {
                es/* Toast.show */.FN.show({
                    icon: 'fail',
                    content: res.data.sendMsg
                });
            }
        }, function (err) {
            es/* Toast.show */.FN.show({
                icon: 'fail',
                content: err.sendMsg
            });
        });
    };
    return react.createElement("div", { className: 'resgister-form-wrapper' },
        react.createElement(es/* Form */.l0, { layout: 'horizontal', form: form, requiredMarkStyle: 'none' },
            react.createElement("div", { className: 'login-item' },
                react.createElement("span", { className: 'login-item-title' }, "\u9080\u8BF7\u7801"),
                react.createElement("div", { className: 'login-item-component' },
                    react.createElement(es/* Form.Item */.l0.Item, { name: 'invitationCode', rules: [{ required: false, message: '请输入邀请码' }] },
                        react.createElement(es/* Input */.II, { placeholder: '\u8BF7\u8F93\u5165\u9080\u8BF7\u7801', clearable: true, className: 'input-style' })))),
            react.createElement("div", { className: 'login-item' },
                react.createElement("span", { className: 'login-item-title' }, "\u624B\u673A\u53F7"),
                react.createElement("div", { className: 'login-item-component' },
                    react.createElement(es/* Form.Item */.l0.Item, { name: 'phoneNum', validateTrigger: ['onBlur'], rules: [
                            { required: true, message: '请输入11位手机号' },
                            pkgNameRule
                        ] },
                        react.createElement(es/* Input */.II, { placeholder: '\u8BF7\u8F93\u516511\u4F4D\u624B\u673A\u53F7', clearable: true, className: 'input-style' })))),
            react.createElement("div", { className: 'login-item' },
                react.createElement("span", { className: 'login-item-title' }, "\u9A8C\u8BC1\u7801"),
                react.createElement("div", { className: 'login-item-component' },
                    react.createElement(es/* Form.Item */.l0.Item, { noStyle: true, name: 'verifyCode', rules: [{ required: true, message: '请输入验证码' }] },
                        react.createElement(es/* Input */.II, { placeholder: '\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801', clearable: true, className: 'input-style' })),
                    react.createElement(es/* Button */.zx, { block: true, shape: 'rounded', className: 'verification-btn', onClick: getVerificationCode }, verificaationText))),
            react.createElement("div", { className: 'login-item' },
                react.createElement("span", { className: 'login-item-title' }, "\u5BC6\u7801"),
                react.createElement("div", { className: 'login-item-component' },
                    react.createElement(es/* Form.Item */.l0.Item, { name: 'passwd', validateTrigger: ['onBlur'], rules: [
                            { required: true, message: '8~16位数字、英文混合' },
                            passwordRule
                        ] },
                        react.createElement(es/* Input */.II, { type: 'password', placeholder: '8~16\u4F4D\u6570\u5B57\u3001\u82F1\u6587\u6DF7\u5408', clearable: true, className: 'input-style' }))))),
        react.createElement("div", { className: 'login-btn login-register-btn', onClick: registerHandle },
            react.createElement("span", null, "\u6CE8\u518C")),
        react.createElement(Component_Toast, { content: text, visible: showToast }));
};
/* harmony default export */ var Component_RegisteredForm = (RegisteredForm);

;// CONCATENATED MODULE: ./src/pages/Login/index.tsx








var Login = function () {
    // const [currentKey, setCurrentKey] = useState('login')
    var _a = (0,react.useContext)(store_Context), state = _a.state, dispatch = _a.dispatch;
    var loginCurrentKey = state.loginCurrentKey;
    var navigate = (0,react_router_dist/* useNavigate */.s0)();
    var componentMap = {
        login: react.createElement(Component_LoginForm, null),
        registered: react.createElement(Component_RegisteredForm, null)
    };
    var back = (0,react.useCallback)(function () {
        navigate({
            pathname: '/home'
        });
    }, []);
    var tabChangeHandle = (0,react.useCallback)(function (key) {
        dispatch(setLoginCurrentKey(key));
    }, []);
    return react.createElement("div", { className: 'login-wrapper' },
        react.createElement(es/* NavBar */.l2, { onBack: back, back: '\u8FD4\u56DE' }),
        react.createElement(Component_TopRolling, { height: 48, speed: 3 }),
        react.createElement(es/* CapsuleTabs */.GC, { className: 'login-btn-wrapper', onChange: tabChangeHandle, activeKey: loginCurrentKey },
            react.createElement(es/* CapsuleTabs.Tab */.GC.Tab, { title: '\u767B\u5F55', key: 'login' }),
            react.createElement(es/* CapsuleTabs.Tab */.GC.Tab, { title: '\u6CE8\u518C', key: 'registered' })),
        componentMap[loginCurrentKey]);
};
/* harmony default export */ var pages_Login = (Login);

;// CONCATENATED MODULE: ./src/pages/ForgetPassword/index.tsx
var ForgetPassword_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var ForgetPassword_generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (g && (g = 0, op[0] && (_ = 0)), _) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};






var ForgetPassword_count = 60;
var ForgetPassword = function () {
    var _a = (0,react.useState)('获取验证码'), verificaationText = _a[0], setVerificaationText = _a[1];
    var _b = (0,react.useState)(false), showToast = _b[0], setShowToast = _b[1];
    var navigate = (0,react_router_dist/* useNavigate */.s0)();
    var form = es/* Form.useForm */.l0.useForm()[0];
    var back = (0,react.useCallback)(function () {
        navigate({
            pathname: '/login'
        });
    }, []);
    var pkgNameRule = {
        pattern: /^1[3-9]\d{9}$/,
        message: '手机号不合法'
    };
    var passwordRule = {
        pattern: /^[a-zA-Z0-9]{8,16}$/,
        message: '8~16位数字、英文混合'
    };
    var registerHandle = function () { return ForgetPassword_awaiter(void 0, void 0, void 0, function () {
        var obj;
        return ForgetPassword_generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, form.validateFields()];
                case 1:
                    obj = _a.sent();
                    apis.getBackPwd(obj).then(function (res) {
                        // 找回成功
                        if (res.data.resetResult) {
                            setShowToast(true);
                            setTimeout(function () {
                                setShowToast(false);
                            }, 2000);
                            navigate({
                                pathname: '/login'
                            });
                        }
                        else {
                            es/* Toast.show */.FN.show({
                                icon: 'fail',
                                content: res.data.resetMsg
                            });
                        }
                    });
                    return [2 /*return*/];
            }
        });
    }); };
    var getVerificationCode = (0,react.useCallback)(function () {
        if (ForgetPassword_count < 60)
            return;
        form.validateFields(['phoneNum']).then(function (res) {
            console.log(res.data);
            var timerId = null;
            verificationCode();
            setVerificaationText("".concat(ForgetPassword_count, " s"));
            timerId = setTimeout(function run() {
                if (ForgetPassword_count < 1) {
                    clearTimeout(timerId);
                    setVerificaationText('获取验证码');
                    ForgetPassword_count = 60;
                    return;
                }
                ForgetPassword_count -= 1;
                timerId = setTimeout(run, 1000);
                setVerificaationText("".concat(ForgetPassword_count, " s"));
            }, 1000);
        }, function (err) {
            console.log(err);
        });
    }, []);
    var verificationCode = function () {
        apis.getVerifyCode({
            phoneNum: form.getFieldsValue().phoneNum
        }).then(function (res) {
            console.log(res.data);
            if (!res.data.sendResult) {
                es/* Toast.show */.FN.show({
                    icon: 'fail',
                    content: res.data.sendMsg
                });
            }
        }, function (err) {
            es/* Toast.show */.FN.show({
                icon: 'fail',
                content: err.sendMsg
            });
        });
    };
    return react.createElement("div", { className: 'forget-password-wrapper' },
        react.createElement(es/* NavBar */.l2, { onBack: back, back: '\u8FD4\u56DE' }, "\u627E\u56DE\u5BC6\u7801"),
        react.createElement(es/* Form */.l0, { layout: 'horizontal', className: 'forget-form', form: form, requiredMarkStyle: 'none' },
            react.createElement("div", { className: 'login-item' },
                react.createElement("span", { className: 'login-item-title' }, "\u624B\u673A\u53F7"),
                react.createElement("div", { className: 'login-item-component' },
                    react.createElement(es/* Form.Item */.l0.Item, { name: 'phoneNum', validateTrigger: ['onBlur'], rules: [
                            { required: true, message: '请输入11位手机号' },
                            pkgNameRule
                        ] },
                        react.createElement(es/* Input */.II, { placeholder: '\u8BF7\u8F93\u516511\u4F4D\u624B\u673A\u53F7', clearable: true, className: 'input-style' })))),
            react.createElement("div", { className: 'login-item' },
                react.createElement("span", { className: 'login-item-title' }, "\u9A8C\u8BC1\u7801"),
                react.createElement("div", { className: 'login-item-component' },
                    react.createElement(es/* Form.Item */.l0.Item, { noStyle: true, name: 'verifyCode', rules: [{ required: true, message: '请输入验证码' }] },
                        react.createElement(es/* Input */.II, { placeholder: '\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801', clearable: true, className: 'input-style' })),
                    react.createElement(es/* Button */.zx, { block: true, shape: 'rounded', className: 'verification-btn', onClick: getVerificationCode }, verificaationText))),
            react.createElement("div", { className: 'login-item' },
                react.createElement("span", { className: 'login-item-title' }, "\u65B0\u5BC6\u7801"),
                react.createElement("div", { className: 'login-item-component' },
                    react.createElement(es/* Form.Item */.l0.Item, { name: 'newPasswd', validateTrigger: ['onBlur'], rules: [
                            { required: true, message: '8~16位数字、英文混合' },
                            passwordRule
                        ] },
                        react.createElement(es/* Input */.II, { type: 'password', placeholder: '8~16\u4F4D\u6570\u5B57\u3001\u82F1\u6587\u6DF7\u5408', clearable: true, className: 'input-style' }))))),
        react.createElement("div", { className: 'login-btn login-register-btn', onClick: registerHandle },
            react.createElement("span", null, "\u786E\u5B9A")),
        react.createElement(Component_Toast, { content: '\u5BC6\u7801\u4FEE\u6539\u6210', visible: showToast }));
};
/* harmony default export */ var pages_ForgetPassword = (ForgetPassword);

// EXTERNAL MODULE: ./node_modules/moment/moment.js
var moment = __webpack_require__(381);
var moment_default = /*#__PURE__*/__webpack_require__.n(moment);
;// CONCATENATED MODULE: ./src/pages/DoubiExtract/index.tsx
var DoubiExtract_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var DoubiExtract_generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (g && (g = 0, op[0] && (_ = 0)), _) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __spreadArray = (undefined && undefined.__spreadArray) || function (to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
};
var DoubiExtract_this = undefined;




// import { sleep } from 'antd-mobile/es/utils/sleep'



var showText = {
    1: '提取中',
    2: '已完成',
    3: '已退回'
};
var cacheDyIds = [];
var DoubiExtract = function () {
    var _a = (0,react.useState)(false), visible = _a[0], setVisible = _a[1];
    var _b = (0,react.useState)([]), data = _b[0], setData = _b[1];
    var _c = (0,react.useState)(true), hasMore = _c[0], setHasMore = _c[1];
    var _d = (0,react.useState)(0), coinNum = _d[0], setCoinNum = _d[1];
    var _e = (0,react.useState)(0), extractNum = _e[0], setEextractNum = _e[1];
    var _f = (0,react.useState)(''), douyin = _f[0], setDouyin = _f[1];
    var _g = (0,react.useState)([]), dyIds = _g[0], setDyIds = _g[1];
    var _h = (0,react.useState)(false), showDyIds = _h[0], setShowDyIds = _h[1];
    var numRef = (0,react.useRef)(1);
    var isLoad = (0,react.useRef)(true);
    var userInfo = JSON.parse(window.localStorage.getItem('user') || '{}');
    var navigate = (0,react_router_dist/* useNavigate */.s0)();
    // let number = 1
    var closeModal = function () {
        setVisible(false);
    };
    var back = (0,react.useCallback)(function () {
        navigate({
            pathname: '/home'
        });
    }, []);
    // 抖币提取
    var getCoinHistory = function () { return DoubiExtract_awaiter(void 0, void 0, void 0, function () {
        return DoubiExtract_generator(this, function (_a) {
            if (!isLoad.current)
                return [2 /*return*/];
            isLoad.current = false;
            apis.getCoinHostory({
                page: numRef.current,
                pageSize: 10,
                userId: userInfo.userId
            }).then(function (res) {
                var _a, _b;
                setData(function (val) {
                    var temArr = __spreadArray(__spreadArray([], val, true), res.data, true);
                    temArr.forEach(function (item) {
                        item.drawTime = moment_default()(item.lotteryTime).format('YYYY-MM-DD HH:mm:ss');
                    });
                    return __spreadArray(__spreadArray([], val, true), res.data, true);
                });
                setHasMore(((_a = res.data) === null || _a === void 0 ? void 0 : _a.length) > 0);
                if ((_b = res.data) === null || _b === void 0 ? void 0 : _b.length) {
                    numRef.current += 1;
                }
            }, function (err) {
                es/* Toast.show */.FN.show({
                    content: err.err_msg
                });
            }).finally(function () {
                isLoad.current = true;
            });
            return [2 /*return*/];
        });
    }); };
    function loadMore() {
        return DoubiExtract_awaiter(this, void 0, void 0, function () {
            return DoubiExtract_generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, getCoinHistory()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    }
    var homeBack = function () {
        navigate({
            pathname: '/home'
        });
    };
    var extractHandle = function () {
        // if (!coinNum) {
        //   return Toast.show({
        //     content: <span>当前抖币数量为 <label style={{ color: 'red' }}>0</label></span>
        //   })
        // }
        setVisible(true);
    };
    var coinChangeHandle = function (val) {
        setEextractNum(val);
    };
    var douYinChangeHandle = function (val) {
        setDouyin(val);
        var tempArr = cacheDyIds.filter(function (item) { return item.indexOf(val) !== -1; });
        setDyIds(tempArr);
    };
    // 抖币提取
    var coinExtract = function () {
        if (extractNum % 10 !== 0) {
            es/* Toast.show */.FN.show({
                content: '请输入10的整数倍,最大50000',
                duration: 2000
            });
            return;
        }
        es/* Toast.show */.FN.show({
            icon: 'loading',
            content: '加载中…'
        });
        apis.coinExtract({
            userId: userInfo.userId,
            drawDyMoneyAmount: extractNum,
            dyId: douyin
        }).then(function (res) {
            if (!res.data.isDrawEnable) {
                es/* Toast.show */.FN.show({
                    content: res.data.drawFailedMsg
                });
            }
            else {
                es/* Toast.clear */.FN.clear();
                es/* Toast.show */.FN.show({
                    content: '提取申请将在1小时内完成',
                    duration: 2000
                });
                // number = 1
                numRef.current = 1;
                getCoinInfo();
                getCoinHistory();
                setVisible(false);
            }
        }, function (err) {
            es/* Toast.show */.FN.show({
                content: err.drawFailedMsg
            });
            setTimeout(function () {
                es/* Toast.clear */.FN.clear();
            }, 3000);
        });
    };
    // 获取抖币信息
    var getCoinInfo = function () {
        apis.getCoinInfo({
            userId: userInfo.userId
        }).then((function (res) {
            var _a;
            setCoinNum((_a = res.data.dyMoneyAmount) !== null && _a !== void 0 ? _a : 0);
        }), function (err) {
            console.log(err);
            es/* Toast.show */.FN.show({
                content: err.msg
            });
        });
    };
    // 抖音号记录
    var getDyIds = function () {
        apis.getDyIds({
            userId: userInfo.userId
        }).then(function (res) {
            var _a, _b;
            setDyIds((_a = res.data) !== null && _a !== void 0 ? _a : []);
            cacheDyIds = (_b = res.data) !== null && _b !== void 0 ? _b : [];
        }, function () {
            es/* Toast.show */.FN.show({
                content: '获取抖音号失败，请输入'
            });
        });
    };
    // 获取焦点
    var dyFocus = function () {
        setTimeout(function () {
            setShowDyIds(true);
        }, 100);
    };
    // 失去焦点
    var dyBlur = function () {
        setTimeout(function () {
            setShowDyIds(false);
        }, 0);
    };
    // 选择抖音号
    var choiceDyIds = function (val) {
        setDouyin(val);
    };
    (0,react.useEffect)(function () {
        getCoinInfo();
    }, []);
    (0,react.useEffect)(function () {
        if (visible) {
            getDyIds();
            setEextractNum(0);
            setDouyin('');
        }
    }, [visible]);
    return react.createElement("div", { className: 'extract-wrapper' },
        react.createElement(es/* NavBar */.l2, { onBack: back, back: '\u8FD4\u56DE' }, "\u6296\u5E01\u63D0\u53D6"),
        react.createElement(Component_TopRolling, { height: 48, speed: 3 }),
        react.createElement("div", { className: 'extract-header-wrapper' },
            react.createElement("div", { className: 'extract-header' },
                react.createElement("div", { className: 'extract-header-top' },
                    react.createElement("span", { className: 'user-portrait' },
                        react.createElement("img", { className: 'portrait-icon', src: userInfo.avatarUrl || 'https://cdn.tuanzhzh.com/doubi-image/no-login-icon.png' })),
                    react.createElement("span", { className: 'user-name' }, userInfo.nickName || '游客')),
                react.createElement("div", { className: 'extract-header-bottom' },
                    react.createElement("span", null, "\u53EF\u63D0\u53D6\u6296\u5E01"),
                    react.createElement("span", null, coinNum))),
            react.createElement("div", { className: 'extract-btn', onClick: extractHandle },
                react.createElement("span", null, "\u63D0\u53D6"))),
        react.createElement("div", { className: 'home-back', onClick: homeBack },
            react.createElement("img", { className: 'doubi-tiqu', src: 'https://cdn.tuanzhzh.com/doubi-image/home-icon.png' }),
            react.createElement("span", { className: 'doubi-tiqu-text' }, "\u8FD4\u56DE\u9996\u9875")),
        react.createElement("div", { className: 'extract-list-wrapper' },
            react.createElement(es/* List */.aV, null, data.map(function (item, i) {
                return react.createElement(es/* List.Item */.aV.Item, { key: i },
                    react.createElement("div", { className: item.status.code === 3 ? 'extract-list-item extract-list-item2' : 'extract-list-item' },
                        react.createElement("div", { className: 'extract-list-content' },
                            react.createElement("div", { className: 'list-item-top' },
                                react.createElement("span", { className: 'list-item-user' }, userInfo.nickName || '--'),
                                react.createElement("span", null,
                                    react.createElement("label", null, "\u63D0\u53D6\u6296\u5E01"),
                                    react.createElement("label", { className: 'list-item-num' }, item.drawDyMoneyAmount || 0)),
                                react.createElement("span", { className: 'list-item-zhi' }, "\u81F3"),
                                item.status.code === 3 ? react.createElement("span", { className: 'list-item-error' }, "\u6296\u97F3\u8D26\u53F7\u5F02\u5E38") : ''),
                            react.createElement("div", { className: 'list-item-bottom' },
                                react.createElement("span", { className: 'list-item-time' }, item.drawTime || '--'),
                                react.createElement("span", null,
                                    react.createElement("label", null, "\u6296\u97F3"),
                                    react.createElement("label", { className: 'list-item-douyin-number' }, item.dyId || '--')),
                                react.createElement("span", { className: item.status.code === 3 ? 'list-item-operation-btn list-item-operation-btn2' : 'list-item-operation-btn' },
                                    react.createElement("label", null, showText[item.status.code]))))));
            })),
            react.createElement(es/* InfiniteScroll */.v_, { loadMore: loadMore, hasMore: hasMore })),
        react.createElement(es/* Modal */.u_, { bodyClassName: 'extract-modal-wrapper', visible: visible, title: react.createElement("div", { className: 'extract-modal-title' },
                react.createElement("span", null, "\u53EF\u63D0\u53D6\u6296\u5E01"),
                react.createElement("img", { className: 'icon-close', onClick: closeModal, src: 'https://cdn.tuanzhzh.com/doubi-image/close-modal-icon.png' })), content: react.createElement("div", { className: 'extract-modal-content' },
                react.createElement("div", { className: 'extract-modal-doubi-num' }, coinNum),
                react.createElement("div", { className: 'extract-modal-form' },
                    react.createElement("div", { className: 'form-item' },
                        react.createElement("span", { className: 'form-item-name' }, "\u63D0\u53D6\u6296\u5E01"),
                        react.createElement(es/* Input */.II, { placeholder: '10\u7684\u6574\u6570\u500D,\u6700\u592750000', className: 'form-input-style', onChange: coinChangeHandle, type: 'number', clearable: true })),
                    react.createElement("div", { className: 'form-item' },
                        react.createElement("span", { className: 'form-item-name' }, "\u9009\u62E9\u6296\u97F3\u53F7"),
                        react.createElement(es/* Input */.II, { placeholder: '\u8BF7\u8F93\u5165\u6296\u97F3\u53F7', className: 'form-input-style', clearable: true, onChange: douYinChangeHandle, onFocus: dyFocus, value: douyin, onBlur: dyBlur }),
                        react.createElement("ul", { className: showDyIds ? 'form-douyin-id-ul' : 'form-douyin-id-ul hide' }, dyIds.map(function (list, k) {
                            return react.createElement("li", { key: k, onClick: choiceDyIds.bind(DoubiExtract_this, list) }, list);
                        })))),
                react.createElement("div", { className: 'extract-bottom-wrapper' },
                    react.createElement("div", { className: 'extract-bottom-btn', onClick: coinExtract },
                        react.createElement("span", null, "\u786E\u5B9A")),
                    react.createElement("div", { className: 'extract-bottom-text' }, "\u7CFB\u7EDF\u4F1A\u6309\u7167\u60A8\u9009\u62E9\u6216\u8F93\u5165\u7684\u6296\u97F3\u53F7\u8FDB\u884C\u5145\u503C"))), closeOnAction: true, onClose: function () {
                setVisible(false);
            } }));
};
/* harmony default export */ var pages_DoubiExtract = (DoubiExtract);

;// CONCATENATED MODULE: ./src/pages/History/index.tsx
var History_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var History_generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (g && (g = 0, op[0] && (_ = 0)), _) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};







var borderColorMap = {
    '#FD3636': 'red-border',
    '#FFAD5E': 'yellow-border',
    '#D651FF': 'purple-border',
    '#2FBFFF': 'blue-border',
    '#FFFFFF': 'none-border'
};
var History = function () {
    var _a = (0,react.useState)([]), data = _a[0], setData = _a[1];
    var _b = (0,react.useState)(true), hasMore = _b[0], setHasMore = _b[1];
    var userInfo = JSON.parse(window.localStorage.getItem('user') || '{}');
    var navigate = (0,react_router_dist/* useNavigate */.s0)();
    var numRef = (0,react.useRef)(1);
    var isLoad = (0,react.useRef)(true);
    var back = (0,react.useCallback)(function () {
        navigate({
            pathname: '/home'
        });
    }, []);
    var homeBack = function () {
        navigate({
            pathname: '/home'
        });
    };
    function loadMore() {
        return History_awaiter(this, void 0, void 0, function () {
            return History_generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, getLotteryHistory()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    }
    // 获取历史记录
    var getLotteryHistory = function () {
        if (!isLoad.current)
            return;
        isLoad.current = false;
        apis.getLotteryHistory({
            userId: userInfo.userId,
            page: numRef.current,
            pageSize: 10
        }).then(function (res) {
            var _a, _b, _c;
            // let arr =[]
            // res.data?.forEach((item, i) => {
            //   const tempArr = item.giftList?.filter(list => list.giftId === item.maxValueGiftId) || []
            //   res.data[i].giftList = tempArr
            // })
            setHasMore(((_a = res.data) === null || _a === void 0 ? void 0 : _a.length) > 0);
            if ((_b = res.data) === null || _b === void 0 ? void 0 : _b.length) {
                numRef.current += 1;
            }
            (_c = res.data) === null || _c === void 0 ? void 0 : _c.forEach(function (item) {
                item.lotteryTime = moment_default()(item.lotteryTime).format('YYYY-MM-DD HH:mm:ss');
                item.orderId = item.lotteryId.substr(0, 8);
            });
            setData(data.concat(res.data));
        }, function () {
            es/* Toast.show */.FN.show({
                content: '获取历史记录出错'
            });
        }).finally(function () {
            isLoad.current = true;
        });
    };
    (0,react.useEffect)(function () {
        getLotteryHistory();
        numRef.current = 1;
    }, []);
    return react.createElement("div", { className: 'history-wrapper' },
        react.createElement(es/* NavBar */.l2, { onBack: back }, "\u5386\u53F2\u8BB0\u5F55"),
        react.createElement(Component_TopRolling, { height: 48, speed: 3 }),
        react.createElement("div", { className: 'home-back', onClick: homeBack },
            react.createElement("img", { className: 'doubi-tiqu', src: 'https://cdn.tuanzhzh.com/doubi-image/home-icon.png' }),
            react.createElement("span", { className: 'doubi-tiqu-text' }, "\u8FD4\u56DE\u9996\u9875")),
        react.createElement("div", { className: 'extract-list-wrapper' },
            react.createElement(es/* List */.aV, null, data === null || data === void 0 ? void 0 : data.map(function (item, i) {
                var _a, _b, _c, _d, _e, _f, _g, _h;
                return react.createElement(es/* List.Item */.aV.Item, { key: i },
                    react.createElement("div", { className: "extract-list-item ".concat(borderColorMap[(_a = item.gift) === null || _a === void 0 ? void 0 : _a.giftColor]) },
                        react.createElement("div", { className: 'extract-list-content' },
                            react.createElement("div", { className: 'list-item-top' },
                                react.createElement("span", null,
                                    react.createElement("span", { className: 'list-item-user' }, (_b = item.orderId) !== null && _b !== void 0 ? _b : '--')),
                                react.createElement("span", { className: 'list-item-prize-name', style: { color: (_c = item.gift) === null || _c === void 0 ? void 0 : _c.giftColor } }, ((_d = item.gift) === null || _d === void 0 ? void 0 : _d.giftName) || '--')),
                            react.createElement("div", { className: 'list-item-bottom' },
                                react.createElement("span", { className: 'list-item-time' }, (_e = item.lotteryTime) !== null && _e !== void 0 ? _e : '--'),
                                react.createElement("span", { className: 'list-item-bottom-right' },
                                    react.createElement("label", null, "\u6296\u97F3\u4EF7\u503C"),
                                    react.createElement("label", { className: 'list-item-douyin-number', style: { color: (_f = item.gift) === null || _f === void 0 ? void 0 : _f.giftColor } }, (_h = (_g = item.gift) === null || _g === void 0 ? void 0 : _g.dyMoneyAmount) !== null && _h !== void 0 ? _h : 0))))));
            })),
            react.createElement(es/* InfiniteScroll */.v_, { loadMore: loadMore, hasMore: hasMore })));
};
/* harmony default export */ var pages_History = (History);

;// CONCATENATED MODULE: ./src/route/index.tsx







var ComponentAppRoute = function () {
    var routes = (0,react_router_dist/* useRoutes */.V$)([
        { path: '/', element: react.createElement(react_router_dist/* Navigate */.Fg, { to: '/home' }) },
        { path: '/home', element: react.createElement(pages_Home, null) },
        { path: '/login', element: react.createElement(pages_Login, null) },
        { path: '/forget', element: react.createElement(pages_ForgetPassword, null) },
        { path: '/extract', element: react.createElement(pages_DoubiExtract, null) },
        { path: '/history', element: react.createElement(pages_History, null) }
    ]);
    return routes;
};
/* harmony default export */ var route = (ComponentAppRoute);

;// CONCATENATED MODULE: ./src/pages/Copyright/index.tsx



var Copyright = function () {
    var _a = (0,react.useState)(false), showHistoryRecord = _a[0], setShowHistoryRecord = _a[1];
    var location = (0,react_router_dist/* useLocation */.TH)();
    var navigate = (0,react_router_dist/* useNavigate */.s0)();
    var showHistoryRecordHandle = function () {
        navigate({
            pathname: '/history'
        });
    };
    (0,react.useEffect)(function () {
        if (location.pathname === '/extract') {
            setShowHistoryRecord(true);
        }
        else {
            setShowHistoryRecord(false);
        }
    }, [location.pathname]);
    return react.createElement("div", { className: 'copy-right' },
        react.createElement("div", { className: 'copy-right-wrapper' },
            react.createElement("span", null, "Copyright"),
            showHistoryRecord && react.createElement("span", { className: 'history-record', onClick: showHistoryRecordHandle }, "\u5386\u53F2\u8BB0\u5F55")));
};
/* harmony default export */ var pages_Copyright = (Copyright);

;// CONCATENATED MODULE: ./src/app/index.tsx






var App = function () {
    var _a = UseEnhancedReducer(src_store, store_initialState), state = _a[0], dispatch = _a[1];
    return react.createElement(react.Suspense, { fallback: '\u52A0\u8F7D\u4E2D...' },
        react.createElement(store_Context.Provider, { value: { state: state, dispatch: dispatch } },
            react.createElement("div", { className: 'app-wrapper' },
                react.createElement(route, null),
                react.createElement(pages_Copyright, null))));
};
/* harmony default export */ var app = (App);

;// CONCATENATED MODULE: ./src/index.tsx


// import ComponentAppRoute from './route'
// import { BrowserRouter, Route, Routes } from 'react-router-dom'


// import 'antd-mobile/es/global'

react_dom.render(react.createElement(dist/* BrowserRouter */.VK, null,
    react.createElement(app, null)), document.getElementById('root'));


/***/ }),

/***/ 4654:
/***/ (function() {

/* (ignored) */

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	!function() {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = function(result, chunkIds, fn, priority) {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var chunkIds = deferred[i][0];
/******/ 				var fn = deferred[i][1];
/******/ 				var priority = deferred[i][2];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	!function() {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = function(module) {
/******/ 			var getter = module && module.__esModule ?
/******/ 				function() { return module['default']; } :
/******/ 				function() { return module; };
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/create fake namespace object */
/******/ 	!function() {
/******/ 		var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };
/******/ 		var leafPrototypes;
/******/ 		// create a fake namespace object
/******/ 		// mode & 1: value is a module id, require it
/******/ 		// mode & 2: merge all properties of value into the ns
/******/ 		// mode & 4: return value when already ns object
/******/ 		// mode & 16: return value when it's Promise-like
/******/ 		// mode & 8|1: behave like require
/******/ 		__webpack_require__.t = function(value, mode) {
/******/ 			if(mode & 1) value = this(value);
/******/ 			if(mode & 8) return value;
/******/ 			if(typeof value === 'object' && value) {
/******/ 				if((mode & 4) && value.__esModule) return value;
/******/ 				if((mode & 16) && typeof value.then === 'function') return value;
/******/ 			}
/******/ 			var ns = Object.create(null);
/******/ 			__webpack_require__.r(ns);
/******/ 			var def = {};
/******/ 			leafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];
/******/ 			for(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {
/******/ 				Object.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });
/******/ 			}
/******/ 			def['default'] = function() { return value; };
/******/ 			__webpack_require__.d(ns, def);
/******/ 			return ns;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	!function() {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = function(exports, definition) {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	!function() {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	!function() {
/******/ 		__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	!function() {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = function(exports) {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	!function() {
/******/ 		__webpack_require__.nmd = function(module) {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	!function() {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			826: 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = function(parentChunkLoadingFunction, data) {
/******/ 			var chunkIds = data[0];
/******/ 			var moreModules = data[1];
/******/ 			var runtime = data[2];
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunkdoubi"] = self["webpackChunkdoubi"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	}();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, [736], function() { return __webpack_require__(764); })
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ })()
;
//# sourceMappingURL=index.bundle.js.map